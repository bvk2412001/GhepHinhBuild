System.register("chunks:///_virtual/EndGame.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,r,i,a,l,c,u,s,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.AudioSource,c=e.Node,u=e.tween,s=e.Vec3,d=e.director,p=e.Component}],execute:function(){var f,g,m,E,G,b,y,v,w;i._RF.push({},"30d13zEtj1NE5XovQSJBBzg","EndGame",void 0);var h=a.ccclass,S=a.property;e("EndGame",(f=h("EndGame"),g=S(l),m=S(c),E=S(c),f((y=t((b=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"tingtingEndGame",y,r(t)),o(t,"nodeRootUIEndGame",v,r(t)),o(t,"listStar",w,r(t)),t}n(t,e);var i=t.prototype;return i.onEndGame=function(e,t){for(var n=this,o=0;o<e;o++){var r=this.listStar[o];u(r).delay(.7*o).to(.3,{scale:new s(1,1,1)}).call((function(){n.tingtingEndGame.play()})).to(.1,{scale:new s(1.1,1.1,1.1)}).to(.1,{scale:new s(1,1,1)}).to(.1,{scale:new s(1.1,1.1,1.1)}).to(.1,{scale:new s(1,1,1)}).start()}},i.btnRestart=function(){d.loadScene("Game")},i.btnNextLog=function(){console.log("[ACTION]: NEXTGAME")},i.btnListGameLog=function(){console.log("[ACTION]: SHOWLISTGAME")},t}(p)).prototype,"tingtingEndGame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"nodeRootUIEndGame",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"listStar",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=b))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["cc"],(function(t){var u;return{setters:[function(t){u=t.cclegacy}],execute:function(){u._RF.push({},"e0ceeqZ70tKarwtGgUCLxF/","Enums",void 0);t("NameSound",function(t){return t[t.thulai=0]="thulai",t[t.sai=1]="sai",t[t.bauduc=3]="bauduc",t[t.chunhat=4]="chunhat",t[t.ngoisao=5]="ngoisao",t[t.tamgiac=6]="tamgiac",t[t.thoi=7]="thoi",t[t.traitim=8]="traitim",t[t.tron=9]="tron",t[t.vuong=10]="vuong",t}({}));u._RF.pop()}}}));

System.register("chunks:///_virtual/GameCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemCtrl.ts","./Enums.ts"],(function(t){var e,i,n,o,a,r,l,s,u,h,c,d,m,g,p,f,y,v,T,I,b,_,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,s=t.Label,u=t.AudioClip,h=t.AudioSource,c=t.Layout,d=t.instantiate,m=t.Vec3,g=t.UITransform,p=t.Animation,f=t.Tween,y=t.Sprite,v=t.tween,T=t.screen,I=t.Size,b=t.Component},function(t){_=t.ItemCtrl},function(t){C=t.NameSound}],execute:function(){var S,w,E,G,N,x,H,B,P,D,z,W,A,M,L,O,k,R,U,Y,F,q,V,j,Q,X,J,K,Z,$,tt,et,it,nt,ot;a._RF.push({},"661d3LXi19AV5GIgdE0G8QP","GameCtrl",void 0);var at=r.ccclass,rt=r.property,lt=(t("GameCtrl",(S=at("GameCtrl"),w=rt(l),E=rt(l),G=rt(l),N=rt(l),x=rt(l),H=rt(l),B=rt(l),P=rt(s),D=rt(s),z=rt(u),W=rt(u),A=rt(u),M=rt(u),L=rt(h),O=rt(l),k=rt(l),S((Y=e((U=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"containAudio",Y,o(e)),n(e,"layoutItem",F,o(e)),n(e,"containItem",q,o(e)),n(e,"nodeEndGame",V,o(e)),n(e,"nodeHand",j,o(e)),n(e,"nodeTikTak",Q,o(e)),n(e,"nodeSoundItem",X,o(e)),n(e,"lblRequest",J,o(e)),n(e,"lblTime",K,o(e)),n(e,"listAudioClip",Z,o(e)),n(e,"listSoundCorrect",$,o(e)),n(e,"listGoiY",tt,o(e)),n(e,"listSoundFail",et,o(e)),n(e,"audioCorrect",it,o(e)),n(e,"tutorial",nt,o(e)),n(e,"bg",ot,o(e)),e._intervalTouch=1e3,e.canTouch=!1,e._isEndGame=!1,e._maxTimeGame=1e4,e._curNode=void 0,e._canUpdatePos=!1,e._countDownHint=10,e._star=0,e._curStage=0,e.isStartGame=!1,e._listIdxItem=[0,1,2,3,4,5,6,7],e.indexYeah=2,e.indexGoiY=2,e}i(e,t);var a=e.prototype;return a.onLoad=function(){console.log("[INFO]: Progress: 1")},a.BTnStart=function(t,e){this.bg.active=!1,t.target.active=!1,this.StartGame()},a.StartGame=function(){var t=this;this._listIdxItem=function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=[t[i],t[e]];t[e]=n[0],t[i]=n[1]}return t}(this._listIdxItem),this.lblTime.node.active=!1,this.initItem(),this.containAudio.getChildByName("startGame").getComponent(h).play(),this.containAudio.getChildByName("startGame").on(h.EventType.ENDED,this.onEndSoundStartGame.bind(this)),this.containItem.children[this._listIdxItem[this._curStage]].active=!0;var e=this.containItem.children[this._listIdxItem[this._curStage]].name;this.lblRequest.string=lt[""+e.replace("hinh","")],this.ShowHandTutorial(),this.scheduleOnce((function(){t.DragTutorial()}),4),this.scheduleOnce((function(){t.unschedule(t.DragTutorial)}),16)},a.setupnextLevel=function(){try{this.containItem.children[this._listIdxItem[this._curStage]].active=!1,this._curStage+=1,this.containItem.children[this._listIdxItem[this._curStage]].active=!0;var t=this.containItem.children[this._listIdxItem[this._curStage]].name;this.lblRequest.string=lt[""+t.replace("hinh","")]}catch(t){}},a.onEndSoundStartGame=function(){console.log("Den day"),this.lblTime.node.active=!0,this._intervalTouch=0,this._maxTimeGame=60,this._countDownHint=5,"start"==this.containAudio.getChildByName("startGame").getComponent(h).clip.name&&this.initItem()},a.initItem=function(){this.layoutItem.getComponent(c).enabled=!1;for(var t=0;t<this.layoutItem.children.length;t++){var e=this.layoutItem.children[t];e.getChildByName("iconItem").addComponent(_).basePos=e.getWorldPosition(),e.on(l.EventType.TOUCH_START,this.onTouchStart.bind(this)),e.on(l.EventType.TOUCH_MOVE,this.onTouchMove.bind(this))}this.node.on(l.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),this.node.on(l.EventType.TOUCH_END,this.onTouchEnd.bind(this)),this.node.on(l.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this))},a.onTouchStart=function(t){if(this.canTouch&&t.currentTarget.parent==this.layoutItem){this.unschedule(this.DragTutorial),this.tutorial.active=!1,this.isStartGame=!0,this.canTouch=!1,this._intervalTouch=1;var e=this.getItem(t.getUILocation());e&&(this._curNode=d(e.getChildByName("iconItem")),this._curNode.parent=this.node,this._curNode.name=e.name,this._curNode.setWorldPosition(new m(t.getUILocation().x,t.getUILocation().y)),this._curNode.off(l.EventType.TOUCH_START))}},a.getItem=function(t){for(var e=0;e<this.layoutItem.children.length;e++){var i=this.layoutItem.children[e];if(i.active){var n=i.getWorldPosition(),o=i.scale,a=i.getComponent(g).contentSize;if(t.x>=n.x-a.width*o.x/2&&t.x<=n.x+a.width/2*o.x&&t.y>=n.y-a.height/2*o.y&&t.y<=n.y+a.height/2*o.y)return i}}return null},a.onTouchMove=function(t){if(this._canUpdatePos&&!this._isEndGame&&this._curNode){var e=t.getUILocation();this._curNode.setWorldPosition(new m(e.x,e.y))}},a.onTouchEnd=function(t){var e=this,i=this._curNode;if(null!=i){if(!this.checkIsOutLayout(i))return this._curNode=null,void this.returnBasePos(i,this.convertWorldPosNodeToNode(i,this.layoutItem.getChildByName(""+i.name)));this._curNode=null;var n=this.containItem.getChildByName("hinh"+i.name);n.getComponent(p).play();n.getComponent(g).getBoundingBoxToWorld();var o=i.getComponent(g).getBoundingBoxToWorld();if(this.containItem.getComponent(g).getBoundingBoxToWorld().intersects(o)&&n.active){var a=this.containItem.getChildByName("hinh"+i.name);a.scale=new m(1.5,1.5,1.5),f.stopAllByTarget(a),a.getComponent(y).spriteFrame=i.getComponent(y).spriteFrame,"bauduc"==i.name&&(a.angle=90),i&&i.destroy(),this.layoutItem.getChildByName(""+i.name).active=!1,this.layoutItem.getComponent(c).enabled=!0,setTimeout((function(){e.layoutItem.getComponent(c).enabled=!1}),100),this.checkEndGame()&&(this.layoutItem.active=!1,this.scheduleOnce(this.onEndGame.bind(this),2)),this.runSoundYeah(),this.runSoundItem(C[""+i.name],(function(){e.scheduleOnce(e.setupnextLevel.bind(e),1)})),this._countDownHint=5,this.nodeHand.active=!1}else this.RunSound(C.sai),this.RunFail(),this.returnBasePos(i,this.convertWorldPosNodeToNode(i,this.layoutItem.getChildByName(""+i.name)))}},a.checkIsOutLayout=function(t){var e=t.getComponent(g).getBoundingBoxToWorld(),i=this.layoutItem.getComponent(g).getBoundingBoxToWorld();return!e.intersects(i)},a.returnBasePos=function(t,e){var i=this;v(t).by(.5,{position:e}).call((function(){i.layoutItem.getChildByName(""+t.name).active=!0,i.layoutItem.getComponent(c).enabled=!0,setTimeout((function(){t&&t.destroy(),i.layoutItem.getComponent(c).enabled=!1}),100)})).start()},a.onEndGame=function(){if(!this._isEndGame){this.nodeTikTak.active=!1,this._isEndGame=!0;for(var t=0,e=0;e<this.layoutItem.children.length;e++)this.layoutItem.children[e].active||t++;this._star=t>=6?3:t>=4?2:1,this.logResult()}},a.RunSound=function(t,e){var i=new l;i.parent=this.containAudio,i.addComponent(h),i.getComponent(h).clip=this.listAudioClip[t],i.getComponent(h).play()},a.RunFail=function(){if(Math.random()<.3){var t=new l;t.parent=this.containAudio,t.addComponent(h),t.getComponent(h).clip=this.listSoundFail[Math.floor(Math.random()*this.listSoundFail.length)],t.getComponent(h).play(),t.on(h.EventType.ENDED,(function(){try{t.destroy()}catch(t){}}))}},a.update=function(t){if(this.node.getComponent(g).setContentSize(e.getSizeWindow(1366,1024)),!this._isEndGame){if(this._intervalTouch-=t,this._intervalTouch<=0&&(this.canTouch=!0),this._maxTimeGame-=t,this._maxTimeGame>=0&&(this.lblTime.string=this.convertTimeSecondToMinute(this._maxTimeGame)),-1!=this._countDownHint&&(this._countDownHint-=t,this._countDownHint<=0)){if(this._countDownHint=-1,0==this.isStartGame)return;this.showHint()}if(this._maxTimeGame<=5&&(this.nodeTikTak.active=!0),this._maxTimeGame<=0&&!this._isEndGame)return this.nodeTikTak.active=!1,void this.onEndGame();this._canUpdatePos=!0}},a.convertWorldPosNodeToNode=function(t,e){var i=t.getWorldPosition();return e.getWorldPosition().subtract(i)},a.runSoundYeah=function(){if(this.indexYeah++,this.indexYeah%3==0){var t=this.listSoundCorrect.find((function(t){return"soundYeah"==t.name}));if(t){var e=new l;e.parent=this.containAudio,e.addComponent(h),e.getComponent(h).clip=t,e.getComponent(h).play(),e.on(h.EventType.ENDED,(function(){try{e.destroy()}catch(t){}}))}}},a.runSoundGoiY=function(){if(this.indexGoiY++,this.indexGoiY%3==0){var t=new l;t.parent=this.containAudio,t.addComponent(h),t.getComponent(h).clip=this.listGoiY[Math.floor(Math.random()*this.listGoiY.length)],t.getComponent(h).play(),t.on(h.EventType.ENDED,(function(){try{t.destroy()}catch(t){}}))}},a.ShowHandTutorial=function(){this.tutorial.active=!0;var t=this.containItem.children[this._listIdxItem[this._curStage]].name;t=t.replace("hinh","");var e=this.layoutItem.getChildByName(t);this.tutorial.worldPosition=e.worldPosition},a.DragTutorial=function(){var t=this;this.tutorial.active=!0;var e=this.containItem.children[this._listIdxItem[this._curStage]].name;e=e.replace("hinh","");var i=this.layoutItem.getChildByName(e);v(this.tutorial).by(1.5,{position:this.containItem.getChildByName("hinh"+e).getWorldPosition().subtract(i.getWorldPosition())}).call((function(){t.tutorial.setWorldPosition(i.getWorldPosition()),t.tutorial.active=!1,t.scheduleOnce(t.DragTutorial,4)})).start()},a.showHint=function(){var t=this;if(this.runSoundGoiY(),f.stopAllByTarget(this.nodeHand),this._curStage>=this.containItem.children.length)this.nodeHand.active=!1;else{this.nodeHand.active=!0;var e=this.containItem.children[this._listIdxItem[this._curStage]].name;e=e.replace("hinh","");var i=this.layoutItem.getChildByName(e);this.nodeHand.setWorldPosition(i.getWorldPosition().clone()),v(this.nodeHand).by(1.5,{position:this.containItem.getChildByName("hinh"+e).getWorldPosition().subtract(i.getWorldPosition())}).call((function(){t.nodeHand.setWorldPosition(i.getWorldPosition()),t.nodeHand.active=!1})).start()}},a.runSoundItem=function(t,e){void 0===e&&(e=null),this.nodeSoundItem.off(h.EventType.ENDED),this.nodeSoundItem.getComponent(h).clip=this.listAudioClip[t],this.nodeSoundItem.getComponent(h).play(),e&&this.nodeSoundItem.on(h.EventType.ENDED,(function(){e&&e()}))},a.checkEndGame=function(){for(var t=0;t<this.layoutItem.children.length;t++)if(this.layoutItem.children[t].active)return!1;return!0},a.logResult=function(){var t=50-Math.max(0,this._maxTimeGame);t=Math.floor(100*t)/100,console.log("[RESULT]: "+t+" - "+this._star)},a.convertTimeSecondToMinute=function(t){var e=Math.floor(t/60);return((e%=60)<10?"0"+e:e)+":"+((t=Math.floor(t%60))<10?"0"+t:t)},e.getSizeWindow=function(t,e){var i=0,n=0,o=T.windowSize.width/t,a=T.windowSize.height/e;return o>a?(n=T.windowSize.width/a,i=e):(i=T.windowSize.height/o,n=t),new I(n,i)},e}(b)).prototype,"containAudio",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(U.prototype,"layoutItem",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(U.prototype,"containItem",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(U.prototype,"nodeEndGame",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(U.prototype,"nodeHand",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(U.prototype,"nodeTikTak",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(U.prototype,"nodeSoundItem",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(U.prototype,"lblRequest",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(U.prototype,"lblTime",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(U.prototype,"listAudioClip",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=e(U.prototype,"listSoundCorrect",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tt=e(U.prototype,"listGoiY",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),et=e(U.prototype,"listSoundFail",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=e(U.prototype,"audioCorrect",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(U.prototype,"tutorial",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(U.prototype,"bg",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=U))||R)),function(t){return t.vuong="Hình vuông",t.chunhat="Hình chữ nhật",t.tron="Hình tròn",t.thoi="Hình thoi",t.bauduc="Hình bầu dục",t.tamgiac="Hình tam giác",t.traitim="Hình trái tim",t.ngoisao="Hình ngôi sao",t}(lt||{}));a._RF.pop()}}}));

System.register("chunks:///_virtual/ItemCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){r._RF.push({},"9551aj3NvRGML/sOIT/EU2I","ItemCtrl",void 0);n.ccclass,n.property,t("ItemCtrl",function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).basePos=void 0,e}return e(r,t),r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./EndGame.ts","./Enums.ts","./GameCtrl.ts","./ItemCtrl.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/resources', 'chunks:///_virtual/resources'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});